<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>éŸ©å›½å…¬å¼€è¯„è®ºæ‘˜è¦</title>

<style>
:root{
  --bg:#fff7fb;
  --text:#111827;
  --muted:#6b7280;
  --line:rgba(17,24,39,.10);
  --shadow:0 10px 26px rgba(17,24,39,.08);
  --radius:20px;
  --accent:#ff4d6d;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans SC","Apple SD Gothic Neo",Arial,sans-serif;
  background:
    radial-gradient(1000px 500px at 15% 0%, #ffe3ec 0%, rgba(255,227,236,0) 60%),
    radial-gradient(900px 480px at 85% 10%, #ffe9d6 0%, rgba(255,233,214,0) 55%),
    linear-gradient(180deg,var(--bg) 0%,#ffffff 60%,#ffffff 100%);
  color:var(--text);
  min-height:100vh;
}
.wrap{max-width:520px;margin:0 auto;padding:14px 14px 60px;}

.card{
  background:rgba(255,255,255,.92);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
  backdrop-filter:blur(6px);
}

/* ===== Topbar ===== */
.topbar{
  position:sticky;
  top:10px;
  z-index:20;
  display:flex;
  gap:10px;
  align-items:center;
  margin-bottom:12px;
}
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:900;
  cursor:pointer;
}
.searchWrap{
  flex:1;
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#fff;
}
.searchInput{
  width:100%;
  border:none;
  outline:none;
  font-weight:800;
}
.bell{
  position:relative;
  width:44px;height:44px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#fff;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;
}
.dot{
  position:absolute;
  top:8px;right:8px;
  width:10px;height:10px;
  border-radius:999px;
  background:var(--accent);
}

/* ===== Hero ===== */
.heroRow{display:flex;gap:12px;}
.heroIcon{
  width:44px;height:44px;
  border-radius:16px;
  background:#fff;
  border:1px solid var(--line);
  display:flex;align-items:center;justify-content:center;
  font-size:20px;
}
.heroTitle{font-weight:950;font-size:18px;}
.heroLine{margin-top:6px;font-weight:900;}
.heroSub{margin-top:6px;color:var(--muted);font-weight:800;font-size:13px;}
.heroNote{
  margin-top:10px;
  display:inline-block;
  padding:6px 10px;
  border-radius:14px;
  border:1px solid var(--line);
  font-size:12px;
  font-weight:900;
  color:var(--muted);
}

/* ===== Hospital ===== */
.hCard{margin-top:12px;}
.hBtn{
  margin-top:12px;
  width:100%;
  padding:12px;
  border-radius:16px;
  border:none;
  background:linear-gradient(180deg,var(--accent),#ff3b63);
  color:#fff;
  font-weight:900;
  cursor:pointer;
}

/* ===== Carousel ===== */
.recHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:24px 2px 10px;
}
.recAll{
  padding:8px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:900;
  text-decoration:none;
  color:inherit;
  font-size:13px;
}
.carousel{
  display:flex;
  gap:12px;
  overflow:auto;
  scroll-snap-type:x mandatory;
}
.recCard{
  scroll-snap-align:start;
  flex:0 0 calc((100% - 12px)/1.2);
  max-width:360px;
  border-radius:22px;
  border:1px solid var(--line);
  background:#fff;
  box-shadow:var(--shadow);
  overflow:hidden;
  text-decoration:none;
  color:inherit;
}
.recTop{padding:14px;}
.recTitle{font-size:16px;font-weight:900;}
.recMeta{font-size:12px;color:var(--muted);margin-top:6px;}
.recThumb{
  width:100%;
  aspect-ratio:1/1;
  background:#f2f2f2;
}
.recThumb img{width:100%;height:100%;object-fit:cover;}

/* ===== Bottom Sheet ===== */
.sheet{
  position:fixed;inset:0;
  background:rgba(0,0,0,.35);
  display:none;
  align-items:flex-end;
  justify-content:center;
}
.sheetCard{
  width:min(520px,100%);
  background:#fff;
  border-radius:22px;
  padding:16px;
}
.sheetItem{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:16px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:900;
}
.sheetClose{
  width:100%;
  padding:12px;
  border-radius:16px;
  border:none;
  background:var(--accent);
  color:#fff;
  font-weight:900;
}
</style>
</head>

<body>
<main class="wrap">

<div class="topbar">
  <button class="pill" id="regionBtn">å…¨éƒ¨ â–¾</button>
  <div class="searchWrap">
    ğŸ” <input id="searchInput" class="searchInput" placeholder="æœç´¢åŒ»é™¢"/>
  </div>
  <button class="bell" id="bellBtn">ğŸ””<span class="dot" id="bellDot"></span></button>
</div>

<div class="card">
  <div class="heroRow">
    <div class="heroIcon">ğŸ§ </div>
    <div>
      <div class="heroTitle">å…¬å¼€è¯„è®º Â· AI æ‘˜è¦</div>
      <div class="heroLine">éŸ©å›½çœŸå®å°±è¯Šè¯„ä»·ï¼Œä¸€çœ¼å°±æ‡‚</div>
      <div class="heroSub">åŸºäºéŸ©å›½æœ¬åœ°å…¬å¼€è¯„è®ºï¼Œç”± AI æ•´ç†ä¸æ‘˜è¦</div>
      <div class="heroNote">æœ¬æœåŠ¡ä¸æä¾›é¢„çº¦æˆ–åŒ»ç–—æ¨è</div>
    </div>
  </div>
</div>

<div id="hospital-list"></div>

<div class="recHeader">
  <h2>æ¨èå†…å®¹</h2>
  <a class="recAll" href="contents.html">å…¨éƒ¨æŸ¥çœ‹</a>
</div>
<div class="carousel" id="content-carousel"></div>

</main>

<script>
const $ = s => document.querySelector(s);
let ALL_HOSPITALS = [];

function esc(s){return String(s||"");}

async function fetchJson(path){
  const res = await fetch(path);
  return await res.json();
}

function renderHospitals(list){
  const el = $("#hospital-list");
  el.innerHTML = "";

  list.forEach(h => {
    const div = document.createElement("div");
    div.className = "card hCard";
    div.style.cursor = "pointer";

    div.innerHTML = `
      <div class="heroTitle">${esc(h.name_ko || "â€”")}</div>
      <div class="heroSub">${esc(h.name_zh || "")}</div>
      <button class="hBtn" type="button">æŸ¥çœ‹è¯„ä»·æ‘˜è¦</button>
    `;

    const go = () => {
      location.href = `hospital.html?id=${encodeURIComponent(h.id)}`;
    };

    // ì¹´ë“œ í´ë¦­í•´ë„ ì´ë™
    div.addEventListener("click", go);

    // ë²„íŠ¼ í´ë¦­ì€ ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ì™€ ê²¹ì¹˜ë¯€ë¡œ stopPropagation ì²˜ë¦¬
    const btn = div.querySelector(".hBtn");
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      go();
    });

    el.appendChild(div);
  });
}

function renderCarousel(contents){
  const el=$("#content-carousel");
  el.innerHTML="";
  contents.forEach(p=>{
    const a=document.createElement("a");
    a.className="recCard";
    a.href=`post.html?id=${p.id}`;
    a.innerHTML=`
      <div class="recTop">
        <div class="recTitle">${esc(p.title_zh)}</div>
        <div class="recMeta">${esc(p.published_at)}</div>
      </div>
      <div class="recThumb"></div>
    `;
    el.appendChild(a);
  });
}

(async ()=>{
  const [hdb,cdb]=await Promise.all([
    fetchJson("./hospitals.json"),
    fetchJson("./contents.json")
  ]);
  ALL_HOSPITALS=hdb.hospitals||[];
  renderHospitals(ALL_HOSPITALS);
  renderCarousel(cdb.contents||[]);
})();
</script>
</body>
</html>